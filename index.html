<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Responsive Flipbook</title>
<style>
:root {
  --page-w: 589px;    /* 6.14in */
  --page-h: 885px;    /* 9.21in */
  --spread-w: 1178px; /* double page width */
}

/* Centering and background */
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  background: #ccc;
  display: flex;
  justify-content: center; /* horizontal center */
  align-items: center;     /* vertical center */
  user-select: none;
  overflow: hidden;
}

/* Responsive container */
#flipbook-container {
  width: 100%;
  max-width: 1024px;        /* max page width */
  aspect-ratio: var(--spread-w)/var(--page-h);
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Book wrapper keeps internal sizing */
.book-wrap {
  width: var(--spread-w);
  height: var(--page-h);
  transform-origin: top left;
  position: relative;
  transition: transform 0.3s ease;
}

/* Flipbook container */
.flipbook {
  width: var(--page-w);
  height: var(--page-h);
  position: relative;
  perspective: 2000px;
  transition: width 0.4s cubic-bezier(.45,.05,.55,.95), box-shadow 0.4s;
  background: #fff;
  border-radius: 4px;
  overflow: hidden;
  will-change: width, transform;
}

.flipbook.expanded {
  width: var(--spread-w);
  box-shadow: 0 40px 80px rgba(0,0,0,0.4);
}

.spine {
  position: absolute;
  left: 50%;
  top: 0;
  width: 6px;
  height: 100%;
  background: #222;
  transform: translateX(-50%);
  z-index: 5;
}

/* Pages */
.page {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transform-origin: center center;
  backface-visibility: hidden;
  transition: transform 0.7s cubic-bezier(.55,.05,.35,.95), box-shadow 0.7s;
  overflow: hidden;
  border-radius: 4px;
  background: #fff;
  will-change: transform, box-shadow;
}

.page img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Page flipping animation */
.page.flipping {
  transform: rotateY(-20deg);
  box-shadow: inset -40px 0 80px rgba(0,0,0,0.3);
}

.page.flipped {
  transform: rotateY(-180deg);
  box-shadow: inset 20px 0 60px rgba(0,0,0,0.2);
}

/* Black filler for page 1 & 41 */
.black-half {
  width: var(--page-w);
  height: var(--page-h);
  background: #000;
  flex-shrink: 0;
}

.page.flex {
  display: flex;
}

/* Optional scaling for smaller screens */
@media(max-width:1024px) {
  .book-wrap {
    transform: scale(calc(100% / var(--spread-w)));
  }
}
</style>
</head>
<body>

<div id="flipbook-container">
  <div class="book-wrap">
    <div class="flipbook" id="flipbook">
      <div class="spine"></div>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function(){
const flipbook = document.getElementById("flipbook");
const BASE = "https://cesarsanchezgraphics-prog.github.io/IFyouknewmyfamily/";
const totalSpreads = 41;
const pages = [];
let currentPage = 0;

// FRONT COVER
const front = document.createElement("div");
front.className = "page cover";
front.style.zIndex = totalSpreads + 3;
front.style.transformOrigin = "left center";
const frontImg = document.createElement("img");
frontImg.src = BASE + "OnlineCover.jpg";
front.appendChild(frontImg);
flipbook.appendChild(front);
pages.push(front);

// PAGE 1 (black left, right Composition.jpg)
const p1 = document.createElement("div");
p1.className = "page flex";
p1.style.zIndex = totalSpreads + 2;

const blackLeft = document.createElement("div");
blackLeft.className = "black-half";
p1.appendChild(blackLeft);

const img1 = document.createElement("img");
img1.src = BASE + "Composition.jpg";
p1.appendChild(img1);

flipbook.appendChild(p1);
pages.push(p1);

// INNER SPREADS (Composition2 â†’ Composition40)
for(let i=2;i<=40;i++){
  const spread = document.createElement("div");
  spread.className = "page";
  spread.style.zIndex = totalSpreads - i + 1;

  const img = document.createElement("img");
  img.src = BASE + `Composition${i}.jpg`;
  spread.appendChild(img);

  flipbook.appendChild(spread);
  pages.push(spread);
}

// PAGE 41 (left Composition41.jpg, right black)
const p41 = document.createElement("div");
p41.className = "page flex";
p41.style.zIndex = 1;

const img41 = document.createElement("img");
img41.src = BASE + "Composition41.jpg";
p41.appendChild(img41);

const blackRight = document.createElement("div");
blackRight.className = "black-half";
p41.appendChild(blackRight);

flipbook.appendChild(p41);
pages.push(p41);

// BACK COVER
const back = document.createElement("div");
back.className = "page cover";
back.style.zIndex = 0;
back.style.transformOrigin = "right center";
const backImg = document.createElement("img");
backImg.src = BASE + "OnlineCover2.jpg";
back.appendChild(backImg);
flipbook.appendChild(back);
pages.push(back);

// FLIP LOGIC
flipbook.addEventListener("click", e=>{
  const rect = flipbook.getBoundingClientRect();
  const x = e.clientX - rect.left;
  let page;

  if(x > rect.width/2 && currentPage < pages.length-1){
    page = pages[currentPage];
    page.classList.add("flipping");
    if(currentPage===0) setTimeout(()=>flipbook.classList.add("expanded"),150);
    setTimeout(()=>{
      page.classList.remove("flipping");
      page.classList.add("flipped");
      currentPage++;
    },150);
  }else if(x < rect.width/2 && currentPage>0){
    currentPage--;
    page = pages[currentPage];
    page.classList.add("flipping");
    if(currentPage===0) setTimeout(()=>flipbook.classList.remove("expanded"),150);
    setTimeout(()=>{
      page.classList.remove("flipping");
      page.classList.remove("flipped");
    },150);
  }
});
});
</script>

</body>
</html>
